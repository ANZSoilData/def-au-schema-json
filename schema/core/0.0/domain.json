{
    "$schema": "https://json-schema.org/draft-07/schema",
    "$id": "https://anzsoildata.github.io/def-au-schema-json/schema/core/0.0/domain.json",
    "title": "ANSIS Soil Domain Schema",
    "description": "Compound JSON Schema definitions of the complete list of entities, properties and vocabularies (enumerations).",
    "$comment": "Derived from https://raw.githubusercontent.com/ANZSoilData/def-au-domain/main/rdf/domain.ttl.",
    "type": "object",
    "oneOf": [
        {
            "$ref": "#SoilSite"
        },
        {
            "$ref": "#SoilProfile"
        }
    ],
    "definitions": {
        "Entities": {
            "$id": "/entities",
            "title": "ANSIS Soil Domain Entity Schema",
            "description": "JSON Schema definitions of the complete list of entities (features in GIS speak) defined in the ANSIS Domain Ontology.",
            "definitions": {
                "SoilSite": {
                    "$anchor": "SoilSite",
                    "@id": "https://anzsoil.org/def/au/domain/SoilSite",
                    "title": "ANSIS Soil Site",
                    "description": "A site where samples, observations, and treatments of soil are carried out.",
                    "required": [
                        "@type"
                    ],
                    "properties": {
                        "$schema": {
                            "$ref": "#$schema"
                        },
                        "@context": {
                            "$ref": "#@context"
                        },
                        "@id": {
                            "$ref": "#@id"
                        },
                        "@type": {
                            "$ref": "#@type",
                            "const": "ansis:SoilSite"
                        },
                        "hasGeometry": {
                            "$ref": "#hasGeometry"
                        },
                        "drainage": {
                            "$ref": "#drainage"
                        },
                        "hasProfile": {
                            "oneOf": [
                                {
                                    "$ref": "#SoilProfile_Link"
                                },
                                {
                                    "$ref": "#SoilProfile"
                                }
                            ]
                        }
                    },
                    "additionalProperties": false
                },
                "SoilSite_Link": {
                    "$anchor": "SoilSite_Link",
                    "title": "ANSIS Soil Site Link",
                    "description": "A simple object supporting a link (e.g. a hyperlink) to a soil site.",
                    "required": [
                        "@id",
                        "@type"
                    ],
                    "properties": {
                        "@id": {
                            "$ref": "#@id"
                        },
                        "@type": {
                            "$ref": "#@type",
                            "const": "ansis:SoilSite"
                        },
                        "label": {
                            "$ref": "#label"
                        }
                    },
                    "additionalProperties": false
                },
                "SoilProfile": {
                    "$anchor": "SoilProfile",
                    "@id": "https://anzsoil.org/def/au/domain/SoilProfile",
                    "title": "ANSIS Soil Profile",
                    "description": "A soil profile is a vertical section of a soil from the soil surface through all its horizons to parent material, other consolidated substrate material or selected depth in unconsolidated material.",
                    "required": [
                        "@type"
                    ],
                    "properties": {
                        "$schema": {
                            "$ref": "#$schema"
                        },
                        "@context": {
                            "$ref": "#@context"
                        },
                        "@id": {
                            "$ref": "#@id"
                        },
                        "@type": {
                            "$ref": "#@type",
                            "const": "ansis:SoilProfile"
                        },
                        "hasGeometry": {
                            "$ref": "#hasGeometry"
                        },
                        "drainage": {
                            "$ref": "#drainage"
                        }
                    },
                    "additionalProperties": false
                },
                "SoilProfile_Link": {
                    "$anchor": "SoilProfile_Link",
                    "title": "ANSIS Soil Profile Link",
                    "description": "A simple object supporting a link (e.g. a hyperlink) to a soil profile.",
                    "required": [
                        "@id",
                        "@type"
                    ],
                    "properties": {
                        "@id": {
                            "$ref": "#@id"
                        },
                        "@type": {
                            "$ref": "#@type",
                            "const": "ansis:SoilProfile"
                        },
                        "label": {
                            "$ref": "#label"
                        }
                    },
                    "additionalProperties": false
                }
            }
        },
        "BaseProperties": {
            "$id": "/base-properties",
            "title": "ANSIS JSON Base Property Schema",
            "description": "Base properties used to identify and type entities, bind them to schema, and otherwise describe objects from a system, rather than domain, perspective.",
            "$comment": "Linked Data properties as per https://www.w3.org/TR/json-ld.",
            "definitions": {
                "$schema": {
                    "$anchor": "$schema",
                    "title": "JSON $schema",
                    "$comment": "The JSON schema for the object. For use when \"additionalProperties\": false and therefore a property names $schema reference is a Bad Thing.",
                    "type": "string"
                },
                "@id": {
                    "$anchor": "@id",
                    "title": "JSON-LD Identifier",
                    "description": "An HTTP URI uniquely identifying the object as a Linked Data resource. Dereferencing the URI should, but may not, lead to a JSON or HTML representation of the resource.",
                    "$comment": "After: https://www.w3.org/TR/json-ld/#node-identifiers",
                    "type": "string",
                    "format": "uri"
                },
                "@type": {
                    "$anchor": "@type",
                    "title": "JSON-LD Type",
                    "description": "A compact URI uniquely identifying the type of the object according to the OWL/RDF domain model.",
                    "examples": [
                        "ansis:SoilSite",
                        "ansis:SoilProfile"
                    ],
                    "$comment": "After: https://www.w3.org/TR/json-ld/#specifying-the-type",
                    "type": "string",
                    "$ref": "#EntityTypes"
                },
                "@context": {
                    "$anchor": "@context",
                    "title": "JSON-LD Context",
                    "description": "A link to a JSON-LD Context document that maps property JSON keywords onto OWL/RDF definitions and namespaces (e.g. ansis) onto their base URI.",
                    "$comment": "After: https://www.w3.org/TR/json-ld/#the-context",
                    "type": "string",
                    "format": "uri",
                    "const": "https://anzsoildata.github.io/def-au-schema-json/schema/core/0.0/context.json"
                },
                "label": {
                    "$anchor": "label",
                    "@id": "http://www.w3.org/2000/01/rdf-schema#label",
                    "title": "RDF Schema Label",
                    "description": "A human-readable name for the object.",
                    "type": "string"
                }
            }
        },
        "Properties": {
            "$id": "/properties",
            "title": "ANSIS Soil Domain Property Schema",
            "description": "JSON Schema definitions of the complete list of properties defined in the ANSIS Domain Ontology. These definitions are referenced by objects in feature/entity schema and may be referenced by multiple objects - i.e. the scope (domain) of a property is not restricted to a single object (entity).",
            "$comment": "Derived from https://raw.githubusercontent.com/ANZSoilData/def-au-domain/main/rdf/domain.ttl.",
            "definitions": {
                "madeBySensor": {
                    "$anchor": "madeBySensor",
                    "@id": "http://www.w3.org/ns/sosa/madeBySensor",
                    "title": "Made by Sensor",
                    "description": "Relation between an Observation and the Sensor which made the Observations.",
                    "$comment": "Forcing a URI on assumption of a sensor registry somewhere else.",
                    "type": "object",
                    "properties": {
                        "@id": {
                            "$ref": "#@id"
                        }
                    }
                },
                "usedProcedure": {
                    "$anchor": "usedProcedure",
                    "@id": "http://www.w3.org/ns/sosa/usedProcedure",
                    "title": "Made by Sensor",
                    "description": "Relation between an Observation and the Sensor which made the Observations.",
                    "$comment": "Forcing a URI pointing to an ANSIS methods vocabulary {!!probably too restrictive!!}. No local enumeration as the list is too long.",
                    "type": "object",
                    "properties": {
                        "@id": {
                            "$ref": "#@id",
                            "pattern": "^https:\/\/anzsoil.org\/def\/au\/.*$"
                        }
                    }
                },
                "phenomenonTime": {
                    "$anchor": "phenomenonTime",
                    "@id": "http://www.w3.org/ns/sosa/phenomenonTime",
                    "title": "Phenomenon Time",
                    "description": "The time that the Result of an Observation, applies to the FeatureOfInterest. Not necessarily the same as the resultTime. May be an interval or an instant, or some other compound temporal entity [owl-time].",
                    "$comment": "Initially restricting to date-time",
                    "type": "string",
                    "format": "date-time"
                },
                "resultTime": {
                    "$anchor": "resultTime",
                    "@id": "http://www.w3.org/ns/sosa/resultTime",
                    "title": "Result Time",
                    "description": "The result time is the instant of time when the Observation activity was completed.",
                    "$comment": "Initially restricting to date-time",
                    "type": "string",
                    "format": "date-time"
                },
                "unit": {
                    "$anchor": "unit",
                    "@id": "http://qudt.org/schema/qudt/unit",
                    "title": "Unit",
                    "description": "A reference to the unit of measure of a quantity (variable or constant) of interest.",
                    "$comment": "Restricted to the QUDT vocabulary as a compact URI.",
                    "type": "object",
                    "properties": {
                        "@id": {
                            "$ref": "#@id",
                            "pattern": "^qudt:.*$"
                        }
                    }
                },
                "observedProperty": {
                    "$anchor": "observedProperty",
                    "@id": "_:for-testing",
                    "required": [
                        "@value"
                    ],
                    "properties": {
                        "@value":{},
                        "unit": {
                            "$ref": "#unit"
                        },
                        "madeBySensor": {
                            "$ref": "#madeBySensor"
                        },
                        "usedProcedure": {
                            "$ref": "#usedProcedure"
                        },
                        "phenomenonTime": {
                            "$ref": "#phenomenonTime"
                        },
                        "resultTime": {
                            "$ref": "#resultTime"
                        }
                    }
                },
                "measuredProperty": {
                    "$anchor": "measuredProperty",
                    "@id": "_:for-testing",
                    "required": [
                        "@value",
                        "usedProcedure"
                    ],
                    "properties": {
                        "@value":{},
                        "unit": {
                            "$ref": "#unit"
                        },
                        "madeBySensor": {
                            "$ref": "#madeBySensor"
                        },
                        "usedProcedure": {
                            "$ref": "#usedProcedure"
                        },
                        "phenomenonTime": {
                            "$ref": "#phenomenonTime"
                        },
                        "resultTime": {
                            "$ref": "#resultTime"
                        }
                    }
                },
                "hasGeometry": {
                    "$anchor": "hasGeometry",
                    "@id": "http://www.opengis.net/ont/geosparql#hasGeometry",
                    "title": "Has Geometry",
                    "description": "The default geometry to be used in spatial calculations. It is Usually the most detailed geometry.",
                    "type": "object",
                    "required": [
                        "@value"
                    ],
                    "properties": {
                        "@value":{
                            "$ref": "#wktLiteral"
                        },
                        "madeBySensor": {
                            "$ref": "#madeBySensor"
                        },
                        "usedProcedure": {
                            "$ref": "#usedProcedure"
                        },
                        "resultTime": {
                            "$ref": "#resultTime"
                        }
                    }
                },
                "wktLiteral": {
                    "$anchor": "wktLiteral",
                    "@id": "http://www.opengis.net/ont/geosparql#wktLiteral",
                    "title": "WKT Literal",
                    "description": "A Well-known Text serialization of a geometry object.",
                    "$comment": "Will use the PostGIS EWKT (Extended Well-known Text) form for ANSIS. Restrict to GDA 2020 (EPSG:7844)?",
                    "type": "string",
                    "examples": [
                        "SRID=7844;POINT(-42 24)",
                        "SRID=7844;LINESTRING(-42 24, -42 42)",
                        "SRID=7844;POLYGON(-42 24, -42 42, -45 42, -42 24)"
                    ]
                },
                "drainage": {
                    "$anchor": "drainage",
                    "@id": "https://anzsoil.org/def/au/domain/drainage",
                    "title": "Drainage",
                    "description": "Drainage of site or profile.",
                    "type": "object",
                    "required": [
                        "@value"
                    ],
                    "properties": {
                        "@value": {
                            "type": "string",
                            "$ref": "#SoilWaterDrainage"
                        },
                        "usedProcedure": {
                            "$ref": "#usedProcedure"
                        }
                    }
                }
            }
        },
        "Enumerations": {
            "$id": "/enumerations",
            "title": "ANSIS Soil Domain Enumerations",
            "$comment": "Enumerations defined according to the pattern recommended here: https://github.com/json-schema-org/json-schema-spec/issues/57",
            "definitions": {
                "EntityTypes": {
                    "$anchor": "EntityTypes",
                    "title": "ANSIS Entity Types",
                    "$comment": "Experimental - an enumeration to help JSON Schema aware clients display type names/labels as pop-ups, etc.",
                    "oneOf": [
                        {
                            "const": "ansis:SoilSite",
                            "description": "Soil Site"
                        },
                        {
                            "const": "ansis:SoilProfile",
                            "description": "Soil Profile"
                        }
                    ]
                },
                "SoilWaterDrainage": {
                    "$anchor": "SoilWaterDrainage",
                    "title": "Soil Water Drainage",
                    "description": "Drainage is a useful term to summarise local soil wetness conditions, that is, it provides a statement about soil and site drainage likely to occur in most years. It is affected by a number of attributes, both internal and external, that may act separately or together. Internal attributes include soil structure, texture, porosity, hydraulic conductivity, and water-holding capacity, while external attributes are source and quality of water, evapotranspiration, gradient and length of slope, and position in the landscape.",
                    "oneOf": [
                        {
                            "const": "sp:soil-water-drainage-1",
                            "description": "very poorly drained"
                        },
                        {
                            "const": "sp:soil-water-drainage-2",
                            "description": "poorly drained"
                        },
                        {
                            "const": "sp:soil-water-drainage-3",
                            "description": "imperfectly drained"
                        },
                        {
                            "const": "sp:soil-water-drainage-4",
                            "description": "moderately well drained"
                        },
                        {
                            "const": "sp:soil-water-drainage-5",
                            "description": "well drained"
                        },
                        {
                            "const": "sp:soil-water-drainage-6",
                            "description": "rapidly drained"
                        }
                    ]
                }
            }
        }
    }
}